<div class="movies-header">
  <h1 class="page-title">Каталог фильмов</h1>
  <input
    type="text"
    placeholder="Поиск по названию..."
    [(ngModel)]="searchTerm"
    (input)="onSearch()"
    class="search-input"
  />
</div>
<div class="movies-grid">
  <div
    *ngFor="let movie of filteredMovies; trackBy: trackByMovieId; let i = index"
    class="movie-card"
    [class.movie-card--animate]="filteredMovies.length > 0"
    [style.animation-delay]="i * 0.05 + 's'"
    (click)="openModal(movie)"
  >
    <img
      *ngIf="movie.image"
      [src]="movie.image"
      [alt]="movie.title"
      class="movie-poster"
    />
    <h3 class="movie-title">{{ movie.title }}</h3>
  </div>

  <div *ngIf="filteredMovies.length === 0" class="no-results">
    Фильмы не найдены
  </div>
</div>

<div 
    *ngIf="selectedMovie" 
    class="modal-overlay" 
    [class.active]="selectedMovie"
    (click)="closeModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
  <button class="modal-close" (click)="closeModal()">&times;</button>
  
  <div class="modal-body">
    <div class="modal-poster">
      <img [src]="selectedMovie.image" [alt]="selectedMovie.title" />
    </div>

    <div class="modal-info">
      <h2>{{ selectedMovie.title }}</h2>
      <div class="movie-year">{{ selectedMovie.year }}</div>
      <p>{{ selectedMovie.description }}</p>
      <button class="btn-page" (click)="openMoviePage()">
        Открыть на отдельной странице
      </button>
    </div>
  </div>
</div>
</div>